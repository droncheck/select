!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";var s;i.r(e);var n=new Uint8Array(16);function o(){if(!s&&!(s="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s(n)}var r=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var a=function(t){return"string"==typeof t&&r.test(t)},l=[],c=0;c<256;++c)l.push((c+256).toString(16).substr(1));var u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(l[t[e+0]]+l[t[e+1]]+l[t[e+2]]+l[t[e+3]]+"-"+l[t[e+4]]+l[t[e+5]]+"-"+l[t[e+6]]+l[t[e+7]]+"-"+l[t[e+8]]+l[t[e+9]]+"-"+l[t[e+10]]+l[t[e+11]]+l[t[e+12]]+l[t[e+13]]+l[t[e+14]]+l[t[e+15]]).toLowerCase();if(!a(i))throw TypeError("Stringified UUID is invalid");return i};var d=function(t,e,i){var s=(t=t||{}).random||(t.rng||o)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e){i=i||0;for(var n=0;n<16;++n)e[i+n]=s[n];return e}return u(s)};function h(t){return Array.from(t).map((function(t){var e=t.value,i=t.text,s=t.selected?"selected":"",n=t.selected?"true":"false";return"\n        <div id=".concat(d(),' class="select__option ').concat(s,'"\n            role="option" data-select-item="single"\n            data-value="').concat(e,'"\n            aria-selected="').concat(n,'"\n            >').concat(i,"</div>\n        ")})).join("")}function p(t){return"string"!=typeof t?"":t.charAt(0).toUpperCase()+t.slice(1)}var f=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];switch(e){case!0:t.classList.add("selected"),t.setAttribute("aria-selected",!0);break;case!1:t.classList.remove("selected"),t.setAttribute("aria-selected",!1)}};function v(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var g=function(){function t(e,i){var s,n,o,r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o=function(t){switch(t.dataset.selectItem){case"single":r.toggle(t);break;case"all":r.toggleAll(t.getAttribute("aria-selected"))}},(n="setSelection")in(s=this)?Object.defineProperty(s,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[n]=o,this.$root=e,this.options=i,document.contains(this.$root)&&this.init()}var e,i,s;return e=t,(i=[{key:"init",value:function(){this.render(),this.$root=this.$root.querySelector(".select"),this.$dropdown=this.$root.querySelector("[data-select-dropdown]"),this.$list=this.$root.querySelector("[data-select-list]"),this.$listItems=this.$root.querySelectorAll("[data-select-item]"),this.$input=this.$root.querySelector("[data-select-input]"),this.$selectedItems=Array.prototype.filter.call(this.$listItems,(function(t){return t.classList.contains("selected")})),this.updateValue(),this.$listItems.length-1===this.$selectedItems.length&&f(this.$listItems[0],!0),this.addListeners(["click","keydown","mousemove","focusout","focusin"])}},{key:"render",value:function(){this.$root.innerHTML=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Выбрать...",i=d();return'\n      <div class="select">\n        <div class="select__window">\n          <input type="text" class="select__input" data-select-input="true" role="combobox" readonly placeholder="'.concat(e,'" aria-haspopup="listbox" aria-expanded="false">\n        </div>\n        <div class="select__dropdown" data-select-dropdown >\n          <div class="select__list" role="listbox" aria-multiselectable="true" data-select-list tabindex="-1" aria-expanded="false" aria-activedescendant="">\n            <div id="').concat(i,'" class="select__option" role="option" data-select-item="all" aria-selected="false">Выбрать все</div>\n            ').concat(h(t),"\n          </div>\n        </div>\n      </div>\n  ")}(this.options.items)}},{key:"addListeners",value:function(t){var e=this;t.forEach((function(t){e["on"+p(t)]=e["on"+p(t)].bind(e),e.$root.addEventListener(t,e["on"+p(t)])}))}},{key:"onMousemove",value:function(t){var e=t.target;e.dataset.selectItem&&this.highlight(e)}},{key:"onFocusout",value:function(t){this.$root.contains(t.relatedTarget)||(this.closeDropdown(),this.$input.classList.remove("focus"))}},{key:"onFocusin",value:function(){this.$input.classList.add("focus")}},{key:"onClick",value:function(t){var e=t.target;e.dataset.selectItem?this.setSelection(e):e.dataset.selectInput&&this.toggleDropdown()}},{key:"onKeydown",value:function(t){var e=t.code;if("Enter"===e)t.preventDefault(),this.$input.focus(),this.toggleDropdown();else if("Space"===e)t.preventDefault(),this.isOpen&&this.setSelection(this.$highlightedListItem);else if("ArrowUp"===e){var i=this.$highlightedListItem.previousElementSibling;i&&this.highlight(i)}else if("ArrowDown"===e){var s=this.$highlightedListItem.nextElementSibling;s&&this.highlight(s)}}},{key:"openDropdown",value:function(){this.isOpen=!0,this.$root.classList.add("open"),this.$dropdown.classList.add("open"),this.$input.setAttribute("aria-expanded",!0),this.$list.setAttribute("aria-expanded",!0),this.highlight(this.$listItems[0]),this.isNeedToReverse&&this.$root.classList.add("reverse"),this.$list.focus(),this.$list.scrollTo(0,0)}},{key:"closeDropdown",value:function(){this.isOpen=!1,this.$root.classList.remove("open"),this.$root.classList.remove("reverse"),this.$dropdown.classList.remove("open"),this.$input.setAttribute("aria-expanded",!1),this.$list.setAttribute("aria-expanded",!1),this.$list.removeAttribute("aria-activedescendant")}},{key:"toggleDropdown",value:function(){this.isOpen?this.closeDropdown():this.openDropdown()}},{key:"select",value:function(t){f(t,!0),this.$selectedItems.push(t),this.updateValue()}},{key:"selectAll",value:function(){var t=this;this.$selectedItems=[],this.$listItems.forEach((function(e){f(e,!0),"single"===e.dataset.selectItem&&t.$selectedItems.push(e)})),this.updateValue()}},{key:"deselect",value:function(t){f(t,!1),this.$selectedItems.splice(this.$selectedItems.indexOf(t),1),this.updateValue()}},{key:"deselectAll",value:function(){this.$selectedItems=[],this.$listItems.forEach((function(t){f(t,!1)})),this.updateValue()}},{key:"toggle",value:function(t){"true"===t.getAttribute("aria-selected")?this.deselect(t):this.select(t)}},{key:"toggleAll",value:function(t){"true"===t?this.deselectAll():this.selectAll()}},{key:"highlight",value:function(t){var e=this;this.$listItems.forEach((function(i){i===t?(i.classList.add("hover"),e.$list.setAttribute("aria-activedescendant",i.id),e.$highlightedListItem=i):i.classList.remove("hover")}))}},{key:"updateValue",value:function(){this.$input.value=this.selectedItemsValues.length?this.selectedItemsValues.join(", "):""}},{key:"selectedItemsValues",get:function(){return this.$selectedItems.map((function(t){return t.dataset.value}))}},{key:"isNeedToReverse",get:function(){return this.$root.getBoundingClientRect().top>window.innerHeight/2}}])&&v(e.prototype,i),s&&v(e,s),t}();document.addEventListener("DOMContentLoaded",(function(){new g(document.getElementById("test"),{items:[{value:"Option 1",text:"Option 1"},{value:"Option 2",text:"Option 2"},{value:"Option 3",text:"Option 3"},{value:"Option 4",text:"Option 4"},{value:"Option 5",text:"Option 5"},{value:"Option 6",text:"Option 6"},{value:"Option 7",text:"Option 7"},{value:"Option 8",text:"Option 8"}]})}))}]);